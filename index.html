<!DOCTYPE html>
<html lang="pl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Monitors</title>
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <div>
    <nav class="nav-close">
      <div class="logo"></div>

      <ul class="nav ">
        <li class="items nav-item-close ">Budżetowe</li>
        <li class="items nav-item-close ">Dla graczy</li>
        <li class="items nav-item-close ">zabytkowe</li>
        <li class="items nav-item-close ">Dla programistów</li>
      </ul>
      <div class="mobile-view-nav">
        <div class="burger-icon">
          <span class="line-long"></span>
          <span class="line-medium"></span>
          <span class="line-short"></span>
        </div>
      </div>
    </nav>
    <main>
      <header>
        <h1>Budżetowe</h1>
      </header>
      <div class="slider">
        <div class="visible-space">
          <div class="img-conteiner">
            <div class="wrapper">
              <img src="img/monitor1.webp" alt="monitor" />
              <div class="text-slide">
                <h1>Slide 2</h1>
                <p>
                  Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Culpa, temporibus. Et saepe modi similique quasi expedita
                  enim praesentium nemo pariatur animi! Fugiat corporis
                  sapiente amet id quibusdam nemo saepe dignissimos.
                </p>
              </div>
            </div>
            <div class="wrapper">
              <img src="img/monitor2.webp" alt="monitor" />
              <div class="text-slide">
                <h1>Slide 3</h1>
                <p>
                  Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Culpa, temporibus. Et saepe modi similique quasi expedita
                  enim praesentium nemo pariatur animi! Fugiat corporis
                  sapiente amet id quibusdam nemo saepe dignissimos.
                </p>
              </div>
            </div>
            <div class="wrapper">
              <img src="img/monitor3.webp" alt="monitor" />
              <div class="text-slide">
                <h1>Slide 4</h1>
                <p>
                  Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Culpa, temporibus. Et saepe modi similique quasi expedita
                  enim praesentium nemo pariatur animi! Fugiat corporis
                  sapiente amet id quibusdam nemo saepe dignissimos.
                </p>
              </div>
            </div>
            <div class="wrapper">
              <img src="img/monitor3.webp" alt="monitor" />
              <div class="text-slide">
                <h1>Slide 5</h1>
                <p>
                  Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Culpa, temporibus. Et saepe modi similique quasi expedita
                  enim praesentium nemo pariatur animi! Fugiat corporis
                  sapiente amet id quibusdam nemo saepe dignissimos.
                </p>
              </div>
            </div>
            <div class="wrapper">
              <img src="img/monitor3.webp" alt="monitor" />
              <div class="text-slide">
                <h1>Slide 6</h1>
                <p>
                  Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Culpa, temporibus. Et saepe modi similique quasi expedita
                  enim praesentium nemo pariatur animi! Fugiat corporis
                  sapiente amet id quibusdam nemo saepe dignissimos.
                </p>
              </div>
            </div>
            <div class="wrapper">
              <img src="img/monitor3.webp" alt="monitor" />
              <div class="text-slide">
                <h1>Slide 7</h1>
                <p>
                  Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Culpa, temporibus. Et saepe modi similique quasi expedita
                  enim praesentium nemo pariatur animi! Fugiat corporis
                  sapiente amet id quibusdam nemo saepe dignissimos.
                </p>
              </div>
            </div>
          </div>
          <button class="slide-btn-design next-slide">
            <i class="fas fa-arrow-right"></i>
          </button>
          <button class="slide-btn-design prev-slide">
            <i class="fas fa-arrow-left"></i>
          </button>
          <div class="slide-nav">
            <div class="active-dot"></div>
          </div>
        </div>
      </div>
    </main>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"
    integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/61630affa7.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery.resizeend@latest/lib/jquery.resizeend.min.js"></script>
  <script>
    const imgConteiner = $(".img-conteiner");
    const nextSlide = $(".next-slide");
    const prevSlide = $(".prev-slide");
    const wrapper = $(".wrapper");
    const images = $(".wrapper img");
    const activeDot = $(".active-dot");
    const slideTextConteiner = $(".text-slide");
    const slideTextHeader = $(".text-slide h1");
    const slideText = $(".text-slide p");
    let currentSlide = Math.floor($(`.wrapper img`).length / 2);
    const wrapperWidth = wrapper[0].getBoundingClientRect().width;

    /* positioning images && create slide-nav dots*/

    images.each(index => {
      const div = document.createElement("div");
      const activeSlide = $(".slide-nav");

      div.className = "dots";
      div.id = `${index + 1}`;

      $(wrapper[index]).animate({
        left: `${wrapperWidth * index}px`
      }, 500);
      activeSlide.append(div);
    });
    /* -----------------------------*/

    const dots = $(".dots");
    /* Which dot is active*/
    const changeDot = targetDot => {
      activeDot.addClass("animate-move");
      activeDot.css("left", `${targetDot}px`);
      activeDot.on("transitionend", () => {
        activeDot.removeClass("animate-move");
      });
    };
    /* -----------------------------*/
    /*change slide function */

    const changeSlide = (moveRange, currentSlide) => {
      images.addClass("side-img");
      images[currentSlide].className = "middle";

      slideTextConteiner.removeClass("text-slide-conteiner-active");
      slideText.removeClass("text-slide-active");
      $(slideTextHeader).removeClass("text-slide-header")

      $(slideTextHeader[currentSlide]).addClass("text-slide-header")
      $(slideTextConteiner[currentSlide]).addClass("text-slide-conteiner-active");
      $(slideText[currentSlide]).addClass("text-slide-active");

      imgConteiner.css("left", `${-moveRange}px`);
      changeDot(dots[currentSlide].offsetLeft);

      if (currentSlide >= images.length - 1) {
        nextSlide.css("transform", "scaleY(0)");
        prevSlide.css("transform", "scaleY(1)");
      } else if (currentSlide === 0) {
        prevSlide.css("transform", "scaleY(0)");
        nextSlide.css("transform", "scaleY(1)");
      } else {
        nextSlide.css("transform", "scaleY(1)");
        prevSlide.css("transform", "scaleY(1)");
      }
    };

    setTimeout(() => {
      changeSlide(
        wrapper[currentSlide].offsetLeft - wrapperWidth / 4,
        currentSlide
      );
    }, 500);
    /* -----------------------------*/

    /* Next slide function*/
    const nextSlideFunc = () => {
      if (images.length - 1 > currentSlide) {
        const nextSlide =
          wrapper[currentSlide].nextElementSibling.offsetLeft -
          wrapperWidth / 4;

        currentSlide++;
        changeSlide(nextSlide, currentSlide);
      }
    };

    nextSlide.click(nextSlideFunc);
    /* -----------------------------*/

    /* prev slide function*/
    const prevSlideFunc = () => {
      if (0 < currentSlide) {
        const prevSlide =
          wrapper[currentSlide].previousElementSibling.offsetLeft -
          wrapperWidth / 4;

        currentSlide--;
        changeSlide(prevSlide, currentSlide);
      }
    };

    prevSlide.click(prevSlideFunc);
    /* -----------------------------*/
    /*change slide by clicking dots*/
    dots.on("click", dot => {
      const currentSlideDot = dot.target.id - 1;
      const targetSlide =
        wrapper[currentSlideDot].offsetLeft - wrapperWidth / 4;

      currentSlide = currentSlideDot;
      changeSlide(targetSlide, currentSlideDot);
    });

    changeDot(dots[currentSlide].offsetLeft);
    /* -----------------------------*/
    /*change slide by dragging*/

    $(".visible-space").on("dragstart", e => {
      let isChangingSlide = false;
      const xStart = e.pageX;
      $(".visible-space").on("dragend", e => {
        const xEnd = e.pageX;
        if (xStart + 70 < xEnd && !isChangingSlide) {
          isChangingSlide = true;
          nextSlideFunc();
        } else if (!isChangingSlide && xStart > xEnd + 70) {
          isChangingSlide = true;
          prevSlideFunc();
        } else if (!isChangingSlide) isChangingSlide = true;
      });
    });
    /* -----------------------------*/
    const onscroll = true;

    /*change slide by touching (For mobile)*/
    $(".visible-space").on("touchstart", (e) => {
      let isChangingSlide = false
      const moveStartX = e.targetTouches[0].pageX;
      $(".visible-space").on("touchend", (e) => {
        const moveEndX = e.changedTouches[0].pageX;

        if (moveStartX + 30 < moveEndX && !isChangingSlide) {
          isChangingSlide = true;
          nextSlideFunc();
        } else if (moveStartX > moveEndX + 30 && !isChangingSlide) {
          isChangingSlide = true;
          prevSlideFunc();
        } else if (!isChangingSlide) isChangingSlide = true;
      })
    })
    /* -----------------------------*/
    /*change position of active dot when window resize*/
    const resizePosition = () => {
      const offsetLeft = wrapper[currentSlide].offsetLeft - wrapperWidth / 4;
      changeDot(dots[currentSlide].offsetLeft);
      changeSlide(offsetLeft, currentSlide);
    };

    $(window).on("resize", resizePosition);
    /* -----------------------------*/

    /*Mobile nav open burger icon animations and nav items*/
    const burgerIcon = $(".mobile-view-nav");
    let isNavHide = true;

    burgerIcon.on("click", () => {
      const nav = $("nav");
      const shortLine = $(".line-short");
      const mediumLine = $(".line-medium");
      const longLine = $(".line-long");

      nav.toggleClass("nav-open");
      nav.toggleClass("nav-close");
      shortLine.toggleClass("nav-active-short-line");
      mediumLine.toggleClass("nav-active-medium-line");
      longLine.toggleClass("nav-active-long-line");
      itemsAnimation();
      isNavHide = !isNavHide;
    });

    const itemsAnimation = hideShow => {
      const navItems = $(".nav li");
      let duration = 100;

      navItems.each(index => {
        setTimeout(() => {
          if (!isNavHide || hideShow === true) {
            $(navItems[index]).css({
              opacity: 1,
              transform: "translateX(0)"
            });
          } else {
            $(navItems[navItems.length - 1 - index]).css({
              opacity: 0,
              transform: "translateX(2000px)",
              transitionDelay: 0,
              transitionDuration: 0.1
            });
          }
        }, duration * index);
      });
    };

    $(window).on("resizeend", e => {
      if ($(this).outerWidth() > 830) {
        itemsAnimation(true);
      } else {
        itemsAnimation(false);
      }
    });
    /* -----------------------------*/
  </script>
</body>

</html>
